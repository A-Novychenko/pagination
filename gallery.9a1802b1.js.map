{"mappings":"sEACAA,OAAOC,eAAeC,EAAS,aAAc,CACzCC,OAAO,IAEXD,EAAQE,QACR,SAAyBC,EAAUC,GAC/B,KAAMD,aAAoBC,GACtB,MAAM,IAAIC,UAAU,oC,WCG5B,SAASC,EAAkBC,EAAQC,GAC/B,IAAI,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAI,CACjC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDhB,OAAOC,eAAeQ,EAAQI,EAAWI,IAAKJ,E,EAftDb,OAAOC,eAAeiB,EAAS,aAAc,CACzCf,OAAO,IAEXe,EAAQd,QACR,SAAsBE,EAAaa,EAAYC,GACvCD,GAAYX,EAAkBF,EAAYe,UAAWF,GACrDC,GAAaZ,EAAkBF,EAAac,GAChD,OAAOd,C,ECRX,IAGegB,ECHZ,W,sBDGkBC,I,aAEjBC,KAAKC,cAAgB,GACrBD,KAAKE,KAAO,EACZF,KAAKG,QAAU,E,iBAGjBV,IAAA,mB,MAAA,W,WACE,OAAOW,MACL,GAAmBC,OAZR,2BAYC,SAAoBA,OAXtB,qCAWiB,OAAuDA,OAAlDL,KAAKC,cAAc,iCAAqDI,OAAtBL,KAAKE,KAAK,cAAyBG,OAAbL,KAAKG,UAE5GG,MAAK,SAAAC,GACJ,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMC,EAAKC,YAIvB,OAFAD,EAAKR,MAAQ,EAENK,EAAKK,M,IAEbC,OAAM,SAAAC,G,OAAOC,MAAM,WAAeV,OAAJS,G,OAG/BrB,IAAA,U,IAAJ,WACE,OAAOO,KAAKC,a,MAGd,SAAYe,GACV,OAAQhB,KAAKC,cAAgBe,C,IAE3BvB,IAAA,U,IAAJ,WACE,OAAOO,KAAKE,I,MAGd,SAAYe,GACV,OAAQjB,KAAKE,KAAOe,C,IAGtBxB,IAAA,Y,MAAA,WACEO,KAAKE,KAAO,C,OCzCb,GCSGgB,EAAO,CACXC,KAAMC,SAASC,cAAc,mBAC7BC,UAAWF,SAASC,cAAc,0BAClCpC,OAAQmC,SAASC,cAAc,cAG3BE,EAAa,IAAIzB,EACvB0B,QAAQC,IAAIF,GACZ,IAAMG,EAAW,IAAIC,qBAAqBC,EAd1B,CACdC,KAAM,KACNC,WAAY,QACZC,UAAW,IAyBb,SAASH,IACPL,EAAWS,mBAAmB1B,MAAK,SAAA2B,G,IAkB7BC,EAlBgCC,EAASF,EAATE,UAAWC,EAAIH,EAAJG,KACzCC,EAAcd,EAAWe,QAAUf,EAAWpB,QAIpD,GAHAqB,QAAQC,IAAIU,GACZX,QAAQC,IAAIY,GAERA,IAAgBF,EAMlB,OALAT,EAASa,UAAUrB,EAAKjC,aACxBiC,EAAKI,UAAUkB,mBACb,YACA,8BASAN,EALSE,EAKIK,QAAO,SAACC,EAAGT,G,IAAIU,EAAYV,EAAZU,aAChC,OACED,EACA,2BAC2BrC,OAAbsC,EAAa,mC,GAG5B,IAEHzB,EAAKI,UAAUkB,mBAAmB,YAAaN,E,IAxCjDhB,EAAKC,KAAKyB,iBAAiB,UAG3B,SAA0BC,GACxBA,EAAEC,iBAEFvB,EAAWwB,YAsCX7B,EAAKI,UAAU0B,UAAY,GApC3BzB,EAAW0B,QAAUJ,EAAEK,cAAcC,MAAMxE,MAC3CiD,G,IARFF,EAAS0B,QAAQlC,EAAKjC,O","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js-components/picture-api.js","<<jsx-config-pragma.js>>","src/gallery.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '32549780-8d52bdcb46ac07f381f032420';\n\nexport default class PituresApi {\n  constructor() {\n    this.searchPicture = '';\n    this.page = 1;\n    this.perPage = 10;\n  }\n\n  fethcPicturesApi() {\n    return fetch(\n      `${BASE_URL}?key=${API_KEY}&q=${this.searchPicture}&orientation=horizontal&page=${this.page}&per_page=${this.perPage}`\n    )\n      .then(resp => {\n        if (!resp.ok) {\n          throw new Error(this.statusText);\n        }\n        this.page += 1;\n\n        return resp.json();\n      })\n      .catch(err => alert(`Ошибка: ${err}`));\n  }\n\n  get picture() {\n    return this.searchPicture;\n  }\n\n  set picture(newSearchPicture) {\n    return (this.searchPicture = newSearchPicture);\n  }\n  get pageNum() {\n    return this.page;\n  }\n\n  set pageNum(newPageNum) {\n    return (this.page = newPageNum);\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n",null,"import './css/common.css';\nimport PituresApi from './js-components/picture-api';\n\nconst options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1.0,\n};\n\nconst refs = {\n  form: document.querySelector('.js-search-form'),\n  container: document.querySelector('.js-articles-container'),\n  target: document.querySelector('.js-guard'),\n};\n\nconst pituresApi = new PituresApi();\nconsole.log(pituresApi);\nconst observer = new IntersectionObserver(fetch, options);\n\nrefs.form.addEventListener('submit', onSearchPictures);\nobserver.observe(refs.target);\n\nfunction onSearchPictures(e) {\n  e.preventDefault();\n\n  pituresApi.resetPage();\n  clearMarkup();\n  pituresApi.picture = e.currentTarget.query.value;\n  fetch();\n}\n\nfunction fetch() {\n  pituresApi.fethcPicturesApi().then(({ totalHits, hits }) => {\n    const maxElements = pituresApi.pageNum * pituresApi.perPage;\n    console.log(totalHits);\n    console.log(maxElements);\n\n    if (maxElements === totalHits) {\n      observer.unobserve(refs.target);\n      refs.container.insertAdjacentHTML(\n        'beforeend',\n        '<p>Всё, закончились!!!</p>'\n      );\n      return;\n    }\n    createMarkup(hits);\n  });\n}\n\nfunction createMarkup(arr) {\n  const markup = arr.reduce((acc, { webformatURL }) => {\n    return (\n      acc +\n      `<li>\n        <img src=\"${webformatURL}\" alt=\"\" width=\"480\">\n    </li>`\n    );\n  }, '');\n\n  refs.container.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction clearMarkup() {\n  refs.container.innerHTML = '';\n}\n"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$952df5239ca3906a$export$2e2bcd8739ae039","PituresApi","this","searchPicture","page","perPage","fetch","concat","then","resp","ok","Error","_this","statusText","json","catch","err","alert","newSearchPicture","newPageNum","$c5908f9dc4c3ccbb$var$refs","form","document","querySelector","container","$c5908f9dc4c3ccbb$var$pituresApi","console","log","$c5908f9dc4c3ccbb$var$observer","IntersectionObserver","$c5908f9dc4c3ccbb$var$fetch","root","rootMargin","threshold","fethcPicturesApi","param","markup","totalHits","hits","maxElements","pageNum","unobserve","insertAdjacentHTML","reduce","acc","webformatURL","addEventListener","e","preventDefault","resetPage","innerHTML","picture","currentTarget","query","observe"],"version":3,"file":"gallery.9a1802b1.js.map"}