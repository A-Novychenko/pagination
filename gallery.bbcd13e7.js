const e={form:document.querySelector(".js-search-form"),container:document.querySelector(".js-articles-container"),target:document.querySelector(".js-guard")},t=new class{fethcPicturesApi(){return fetch(`https://pixabay.com/api/?key=32549780-8d52bdcb46ac07f381f032420&q=${this.searchPicture}&orientation=horizontal&page=${this.page}&per_page=${this.perPage}`).then((e=>{if(!e.ok)throw new Error(this.statusText);return this.page+=1,e.json()})).catch((e=>alert(`Ошибка: ${e}`)))}get picture(){return this.searchPicture}set picture(e){return this.searchPicture=e}get pageNum(){return this.page}set pageNum(e){return this.page=e}resetPage(){this.page=1}constructor(){this.searchPicture="",this.page=1,this.perPage=10}};console.log(t);const r=new IntersectionObserver(n,{root:null,rootMargin:"300px",threshold:1});function n(){t.fethcPicturesApi().then((({totalHits:n,hits:i})=>{const o=t.pageNum*t.perPage;if(console.log(n),console.log(o),o===n)return r.unobserve(e.target),void e.container.insertAdjacentHTML("beforeend","<p>Всё, закончились!!!</p>");!function(t){const r=t.reduce(((e,{webformatURL:t})=>e+`<li>\n        <img src="${t}" alt="" width="480">\n    </li>`),"");e.container.insertAdjacentHTML("beforeend",r)}(i)}))}e.form.addEventListener("submit",(function(r){r.preventDefault(),t.resetPage(),e.container.innerHTML="",t.picture=r.currentTarget.query.value,n()})),r.observe(e.target);
//# sourceMappingURL=gallery.bbcd13e7.js.map
